(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{117:function(e,t,a){"use strict";a.r(t);var s=a(4),o=a(13),r=a(6),n=a(5),c=a(7),l=a(0),m=a.n(l),i=a(20),u=a(3),p=a(1),d=a(14),h=a(15),O=a(18),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(n.a)(t).call(this,e))).promote=function(e){e.preventDefault();var t=a.state.id;d.b.post("/users/promote?id="+t,t,function(e){console.log(e),e.success?(a.setState({role:"ADMIN"}),h.toast.success(m.a.createElement(O.d.successToast,{text:e.message}),{position:h.toast.POSITION.TOP_RIGHT})):(console.log("error message: ",e.message),h.toast.error(m.a.createElement(O.d.errorToast,{text:e.message}),{position:h.toast.POSITION.TOP_RIGHT}))}).catch(function(e){console.error("Promote err:",e),h.toast.error(m.a.createElement(O.d.errorToast,{text:"Internal Server Error: ".concat(e.message)}),{position:h.toast.POSITION.TOP_RIGHT}),403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&(localStorage.clear(),a.props.history.push("/login"))})},a.demote=function(e){e.preventDefault();var t=a.state.id;d.b.post("/users/demote?id="+t,t,function(e){console.log(e),e.success?(a.setState({role:"USER"}),h.toast.success(m.a.createElement(O.d.successToast,{text:e.message}),{position:h.toast.POSITION.TOP_RIGHT})):(console.log("error message: ",e.message),h.toast.error(m.a.createElement(O.d.errorToast,{text:e.message}),{position:h.toast.POSITION.TOP_RIGHT}))}).catch(function(e){console.error("Demote err:",e),h.toast.error(m.a.createElement(O.d.errorToast,{text:"Internal Server Error: ".concat(e.message)}),{position:h.toast.POSITION.TOP_RIGHT}),403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&(localStorage.clear(),a.props.history.push("/login"))})},a.render=function(){return m.a.createElement("tr",{className:"row"},m.a.createElement("td",{className:"col-md-1"},m.a.createElement("h5",null,a.state.index)),m.a.createElement("td",{className:"col-md-3"},m.a.createElement("h5",null,a.state.username)),m.a.createElement("td",{className:"col-md-3"},m.a.createElement("h5",null,a.state.role)),m.a.createElement("td",{className:"col-md-5 d-flex justify-content-center"},!d.c.checkIfIsRoot(a.state.role)&&!d.c.isLoggedInUser(a.state.username)&&m.a.createElement("h5",null,m.a.createElement("button",{className:"btn App-button-primary btn-lg m-1",onClick:a.promote},"Promote")),!d.c.checkIfIsRoot(a.state.role)&&!d.c.isLoggedInUser(a.state.username)&&m.a.createElement("h5",null,m.a.createElement("button",{className:"btn App-button-primary btn-lg m-1",onClick:a.demote},"Demote")),m.a.createElement("h5",null,m.a.createElement(p.b,{className:"btn App-button-primary btn-lg m-1",to:"/home/profile/".concat(a.state.id),role:"button"},"Profile"))))},a.state={id:"",role:"",username:""},a.promote=a.promote.bind(Object(u.a)(Object(u.a)(a))),a.demote=a.demote.bind(Object(u.a)(Object(u.a)(a))),a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(i.a)({},this.props))}}]),t}(l.Component);a.d(t,"default",function(){return b});var b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(n.a)(t).call(this,e))).state={userArr:[],id:""},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;d.b.get("/users/all/"+t,function(a){console.log("users all: ",a),!0===a.success?(h.toast.success(m.a.createElement(O.d.successToast,{text:a.message}),{position:h.toast.POSITION.TOP_RIGHT}),e.setState({userArr:a.payload,id:t})):h.toast.error(m.a.createElement(O.d.errorToast,{text:a.message}),{position:h.toast.POSITION.TOP_RIGHT})}).catch(function(t){console.error("deatils err:",t),h.toast.error(m.a.createElement(O.d.errorToast,{text:"Internal Server Error: ".concat(t.message)}),{position:h.toast.POSITION.TOP_RIGHT}),403===t.status&&"Your JWT token is expired. Please log in!"===t.message&&(localStorage.clear(),e.props.history.push("/login"))})}},{key:"render",value:function(){var e=this;return this.props.match.params.id!==this.props.id&&this.props.getUserToShowId(this.props.match.params.id),m.a.createElement("div",{className:"container col-md-12 text-center"},m.a.createElement("h1",{className:"text-center font-weight-bold display-5",style:{margin:"1rem auto"}},"All Users"),m.a.createElement("table",{className:"table table-hover mt-3 w-80 mx-auto text-center"},m.a.createElement("thead",null,m.a.createElement("tr",{className:"row"},m.a.createElement("th",{className:"col-md-1",scope:"col"},"#"),m.a.createElement("th",{className:"col-md-3",scope:"col"},"Username"),m.a.createElement("th",{className:"col-md-3",scope:"col"},"Role"),m.a.createElement("th",{className:"col-md-5",scope:"col"},"Actions"))),m.a.createElement("tbody",null,this.state.userArr.map(function(t,a){return m.a.createElement(g,Object.assign({key:t.id,index:a+1},e.props,t))}))))}}]),t}(l.Component)}}]);
//# sourceMappingURL=9.d3cd82f8.chunk.js.map