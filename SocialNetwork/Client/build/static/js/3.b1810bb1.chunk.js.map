{"version":3,"sources":["components/auth/LoginPage.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"],"names":["LoginPage","props","_this","Object","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","handleBlur","field","event","setState","touched","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","state","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","validate","username","password","length","onChangeHandler","bind","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__","onSubmitHandler","console","log","target","name","value","_this2","preventDefault","canBeSubmitted","_this$state","otherProps","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","requester","post","response","error","toast","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","_common__WEBPACK_IMPORTED_MODULE_14__","errorToast","text","position","POSITION","TOP_RIGHT","token","split","localStorage","setItem","success","successToast","history","push","catch","err","clear","concat","message","_this$state2","errors","keys","some","x","_this3","_this$state3","isEnabled","shouldMarkError","hasError","shouldShow","className","onSubmit","htmlFor","type","id","onChange","onBlur","aria-describedby","placeholder","disabled","Component","__webpack_require__","d","__webpack_exports__","_objectWithoutProperties","_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__","source","excluded","key","i","getOwnPropertySymbols","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable"],"mappings":"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","file":"static/js/3.b1810bb1.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport '../../styles/FormPages.css';\r\nimport requester from '../../infrastructure/requester';\r\nimport observer from '../../infrastructure/observer';\r\nimport { toast } from 'react-toastify';\r\nimport { ToastComponent } from '../common'\r\n\r\nexport default class LoginPage extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            touched: {\r\n                username: false,\r\n                password: false\r\n            }\r\n        };\r\n\r\n        this.onChangeHandler = this.onChangeHandler.bind(this);\r\n        this.onSubmitHandler = this.onSubmitHandler.bind(this);\r\n    }\r\n\r\n    onChangeHandler(event) {\r\n        console.log('name: ', event.target.name)\r\n        console.log('value: ', event.target.value)\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    }\r\n\r\n    onSubmitHandler(event) {\r\n        event.preventDefault();\r\n        console.log('event: ', event);\r\n\r\n        if (!this.canBeSubmitted()) {\r\n            return;\r\n        }\r\n\r\n        const { touched, ...otherProps } = this.state;\r\n\r\n        requester.post('/login', { ...otherProps }, (response) => {\r\n            console.log('response: ', response)\r\n\r\n            if (response.error) {\r\n                toast.error(<ToastComponent.errorToast text={' Incorrect credentials!'} />, {\r\n                    position: toast.POSITION.TOP_RIGHT,\r\n                });\r\n\r\n\r\n            } else {\r\n                const token = response.split(' ')[1];\r\n                localStorage.setItem('token', token);\r\n\r\n                toast.success(<ToastComponent.successToast text={' You have successfully logged in!'} />, {\r\n                    position: toast.POSITION.TOP_RIGHT\r\n                });\r\n                \r\n                this.props.history.push('/');\r\n            }\r\n\r\n        }).catch(err => {\r\n            console.log('Login Error (POST): ', err)\r\n\r\n            // toast.error(<ToastComponent.errorToast text={`${err.message}`} />, {\r\n            localStorage.clear();\r\n\r\n            // if (err.status === 403 && err.response.url === 'http://localhost:8000/login') {\r\n            //     // this.props.history.push('/login');\r\n            //     toast.error(<ToastComponent.errorToast text={'Incorrect credentials!'} />, {\r\n            //         position: toast.POSITION.TOP_RIGHT\r\n            //     });\r\n\r\n            // } else {\r\n                \r\n                toast.error(<ToastComponent.errorToast text={`${err.message}`} />, {\r\n                    position: toast.POSITION.TOP_RIGHT\r\n                });\r\n            // }\r\n\r\n        })\r\n    }\r\n\r\n    canBeSubmitted() {\r\n        const { username, password } = this.state;\r\n\r\n        const errors = this.validate(username, password);\r\n        const isDisabled = Object.keys(errors).some(x => errors[x])\r\n        return !isDisabled;\r\n    }\r\n\r\n    handleBlur = (field) => (event) => {\r\n        this.setState({\r\n            touched: { ...this.state.touched, [field]: true }\r\n        });\r\n\r\n    }\r\n\r\n    validate = (username, password) => {\r\n        return {\r\n            username: username.length === 0,\r\n            password: password.length === 0\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { username, password } = this.state;\r\n\r\n        const errors = this.validate(username, password);\r\n        const isEnabled = !Object.keys(errors).some(x => errors[x])\r\n\r\n        const shouldMarkError = (field) => {\r\n            const hasError = errors[field];\r\n            const shouldShow = this.state.touched[field];\r\n\r\n            return hasError ? shouldShow : false;\r\n        }\r\n\r\n        return (\r\n            <div className=\"container pt-5\">\r\n\r\n                <h1 className=\"mt-5 mb-5 text-center font-weight-bold \">Login</h1>\r\n                <form className=\"Login-form-container\" onSubmit={this.onSubmitHandler}>\r\n                    <div className=\"form-group\">\r\n                        {/* <label htmlFor=\"username\" className={(shouldMarkError('username') ? \"error-text-label\" : \"\")}>Username</label> */}\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className={\"form-control \" + (shouldMarkError('username') ? \"error\" : \"\")}\r\n                            id=\"username\"\r\n                            name=\"username\"\r\n                            value={this.state.username}\r\n                            onChange={this.onChangeHandler}\r\n                            onBlur={this.handleBlur('username')}\r\n                            aria-describedby=\"usernameHelp\"\r\n                            placeholder=\"Enter username\"\r\n                        />\r\n                        {shouldMarkError('username') && <small id=\"usernameHelp\" className=\"form-text alert alert-danger\">Username is required!</small>}\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\" >Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            className={\"form-control \" + (shouldMarkError('password') ? \"error\" : \"\")}\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value={this.state.password}\r\n                            onChange={this.onChangeHandler}\r\n                            onBlur={this.handleBlur('password')}\r\n                            aria-describedby=\"passwordHelp\"\r\n                            placeholder=\"Enter password\"\r\n                        />\r\n                        {shouldMarkError('password') && <small id=\"passwordHelp\" className=\"form-text alert alert-danger\">Password is required!</small>}\r\n                    </div>\r\n\r\n                    <div className=\"text-center\">\r\n                        <button disabled={!isEnabled} type=\"submit\" className=\"btn App-button-primary btn-lg m-3\">Login</button>\r\n                    </div>\r\n\r\n                </form>\r\n\r\n                {/* <p>{JSON.stringify(this.state, null, 2)}</p> */}\r\n\r\n            </div>\r\n        )\r\n    }\r\n};","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}