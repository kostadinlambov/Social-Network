{"version":3,"sources":["components/user/UserDeletePage.js"],"names":["UserDeletePage","props","_this","Object","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","componentDidMount","userId","match","params","id","requester","get","concat","userData","console","log","setState","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","onSubmitHandlerDelete","e","preventDefault","state","delete","response","success","toast","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_common__WEBPACK_IMPORTED_MODULE_9__","successToast","text","message","position","POSITION","TOP_RIGHT","history","push","error","errorToast","catch","err","status","localStorage","clear","render","authority","getUserToShowId","authorities","isAdmin","userService","isRoot","className","username","email","firstName","lastName","address","city","buttonClass","url","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","role","getUserId","bind","C_Users_valch_Desktop_Social_Network_Project_App_Client_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","Component"],"mappings":"sOAQsBA,cAClB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAgBVQ,kBAAoB,WAChB,IAAMC,EAASR,EAAKD,MAAMU,MAAMC,OAAOC,GAEvCC,IAAUC,IAAV,kBAAAC,OAAgCN,GAAU,SAACO,GACvCC,QAAQC,IAAI,aAAcF,GAE1Bf,EAAKkB,SAALjB,OAAAkB,EAAA,EAAAlB,CAAA,GACOc,OAxBIf,EA6BnBoB,sBAAwB,SAACC,GACrBA,EAAEC,iBACFN,QAAQC,IAAIjB,EAAKuB,MAAMZ,IAEvBC,IAAUY,OAAO,iBAAmBxB,EAAKuB,MAAMZ,GAAI,GAAI,SAACc,IAC3B,IAArBA,EAASC,SACTC,QAAMD,QAAQE,EAAAC,EAAAC,cAACC,EAAA,EAAeC,aAAhB,CAA6BC,KAAMR,EAASS,UAAa,CACnEC,SAAUR,QAAMS,SAASC,YAE7BrC,EAAKD,MAAMuC,QAAQC,KAAnB,MAEAZ,QAAMa,MAAMZ,EAAAC,EAAAC,cAACC,EAAA,EAAeU,WAAhB,CAA2BR,KAAMR,EAASS,UAAa,CAC/DC,SAAUR,QAAMS,SAASC,cAGlCK,MAAM,SAAAC,GACL3B,QAAQwB,MAAM,eAAgBG,GAC9BhB,QAAMa,MAAMZ,EAAAC,EAAAC,cAACC,EAAA,EAAeU,WAAhB,CAA2BR,KAAI,0BAAAnB,OAA4B6B,EAAIT,WAAe,CAEtFC,SAAUR,QAAMS,SAASC,YAGX,MAAfM,EAAIC,QAAkC,8CAAhBD,EAAIT,UACzBW,aAAaC,QACb9C,EAAKD,MAAMuC,QAAQC,KAAK,cArDjBvC,EA0DnB+C,OAAS,WAKL,IAAIC,EAJDhD,EAAKD,MAAMU,MAAMC,OAAOC,KAAOX,EAAKD,MAAMY,IACzCX,EAAKD,MAAMkD,gBAAgBjD,EAAKD,MAAMU,MAAMC,OAAOC,IAInDX,EAAKuB,MAAM2B,YAAY,KACvBF,EAAYhD,EAAKuB,MAAM2B,YAAY,GAAvB,WAGhB,IAAMC,EAAUC,IAAYD,UACtBE,EAASD,IAAYC,SAG3B,OACIzB,EAAAC,EAAAC,cAAA,OAAKwB,UAAU,kCACX1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,mFAAd,8CACA1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,oCACd1B,EAAAC,EAAAC,cAAA,OAAKwB,UAAU,gCACX1B,EAAAC,EAAAC,cAAA,SAAOwB,UAAU,8CACb1B,EAAAC,EAAAC,cAAA,aACIF,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,sBAKlB1B,EAAAC,EAAAC,cAAA,aACIF,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,aAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMgC,YAGxB3B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,UAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMiC,SAGxB5B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,eAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMkC,aAGxB7B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,cAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMmC,YAGxB9B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,YAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMoC,WAGxB/B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,SAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAK9B,EAAKuB,MAAMqC,SAGtBT,GAAWE,IAAWzB,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,OAClC1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qBAAd,SAEJ1B,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,YACV1B,EAAAC,EAAAC,cAAA,UAAKkB,OAMrBpB,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,qCACd1B,EAAAC,EAAAC,cAAA,OAAKwB,UAAU,mCACTH,GAAWE,IAAWzB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAsB8B,YAAa,oCAAqCC,IAAG,sBAAyB7B,KAAM,SAAU8B,QAAS/D,EAAKoB,yBACxJ+B,GAAWE,IAAWzB,EAAAC,EAAAC,cAACkC,EAAA,EAAD,CAASV,UAAU,oCAAoCW,GAAE,iBAAAnD,OAAmBd,EAAKD,MAAMY,IAAMuD,KAAK,UAAlG,WACtBf,GAAWE,IAAWzB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQ8B,YAAa,oCAAqCC,IAAG,mBAAAhD,OAAqBsC,IAAYe,aAAelC,KAAM,gBAInJL,EAAAC,EAAAC,cAAA,MAAIwB,UAAU,sCArJtBtD,EAAKuB,MAAQ,CACTZ,GAAI,GACJ4C,SAAU,GACVC,MAAO,GACPC,UAAW,GACXC,SAAU,GACVC,QAAS,GACTC,KAAM,GACNV,YAAa,IAGjBlD,EAAKoB,sBAAwBpB,EAAKoB,sBAAsBgD,KAA3BnE,OAAAoE,EAAA,EAAApE,QAAAoE,EAAA,EAAApE,CAAAD,KAddA,6BADsBsE","file":"static/js/11.a0cb30cd.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport {NavLink } from 'react-router-dom';\r\nimport { userService, requester } from '../../infrastructure';\r\nimport { Button, ButtonWithClickEvent } from '../common'\r\nimport { toast } from 'react-toastify';\r\nimport { ToastComponent } from '../common'\r\n\r\n\r\n export default class UserDeletePage extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            id: '',\r\n            username: '',\r\n            email: '',\r\n            firstName: '',\r\n            lastName: '',\r\n            address: '',\r\n            city: '',\r\n            authorities: []\r\n        };\r\n\r\n        this.onSubmitHandlerDelete = this.onSubmitHandlerDelete.bind(this);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const userId = this.props.match.params.id;\r\n\r\n        requester.get(`/users/details/${userId}`, (userData) => {\r\n            console.log(\"userData: \", userData);\r\n\r\n            this.setState({\r\n                ...userData\r\n            })\r\n        })\r\n    }\r\n\r\n    onSubmitHandlerDelete = (e) => {\r\n        e.preventDefault();\r\n        console.log(this.state.id);\r\n\r\n        requester.delete('/users/delete/' + this.state.id, {}, (response) => {\r\n            if (response.success === true) {\r\n                toast.success(<ToastComponent.successToast text={response.message} />, {\r\n                    position: toast.POSITION.TOP_RIGHT\r\n                });\r\n                this.props.history.push(`/`);\r\n            } else {\r\n                toast.error(<ToastComponent.errorToast text={response.message} />, {\r\n                    position: toast.POSITION.TOP_RIGHT\r\n                });\r\n            }\r\n        }).catch(err => {\r\n            console.error('deatils err:', err)\r\n            toast.error(<ToastComponent.errorToast text={`Internal Server Error: ${err.message}`} />, {\r\n                // toast.error(<ToastComponent.errorToast text={`${error.name}: ${error.message}`} />, {\r\n                position: toast.POSITION.TOP_RIGHT\r\n            });\r\n\r\n            if(err.status === 403 && err.message === 'Your JWT token is expired. Please log in!'){\r\n                localStorage.clear();\r\n                this.props.history.push('/login');\r\n            }\r\n        })\r\n    }\r\n\r\n    render = () => {\r\n        if(this.props.match.params.id !== this.props.id){\r\n            this.props.getUserToShowId(this.props.match.params.id);\r\n        }\r\n\r\n        let authority;\r\n        if (this.state.authorities[0]) {\r\n            authority = this.state.authorities[0]['authority'];\r\n        }\r\n\r\n        const isAdmin = userService.isAdmin();\r\n        const isRoot = userService.isRoot();\r\n\r\n        debugger;\r\n        return (\r\n            <div className=\"container mx-auto text-center \" >\r\n                <h1 className=\"text-center font-weight-bold alert alert-danger position col-md-10 mx-auto mt-0\">Are you sure you want to delete this User?</h1>\r\n                <hr className=\"my-2 mb-3 mt-3 col-md-8 mx-auto\" />\r\n                <div className=\"col-md-6 mx-auto text-center\">\r\n                    <table className=\"table table-hover mt-3 mx-auto text-center\">\r\n                        <thead>\r\n                            <tr className=\"row align-center\">\r\n                                {/* <th className=\"col-md-6\" scope=\"col\">Category:</th>\r\n                                <th className=\"col-md-6\" scope=\"col\">Price</th>  */}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\">\r\n                                    <h5 className=\" font-weight-bold\">Username</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5>{this.state.username}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">Email</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\">\r\n                                    <h5>{this.state.email}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">First Name</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5>{this.state.firstName}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">Last Name</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5>{this.state.lastName}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">Address</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\">\r\n                                    <h5>{this.state.address}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">City</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5>{this.state.city}</h5>\r\n                                </td>\r\n                            </tr>\r\n                            {(isAdmin || isRoot) && <tr className=\"row\">\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5 className=\" font-weight-bold\">Role</h5>\r\n                                </td>\r\n                                <td className=\"col-md-6\" >\r\n                                    <h5>{authority}</h5>\r\n                                </td>\r\n                            </tr>}\r\n\r\n                        </tbody>\r\n                    </table>\r\n                    <hr className=\"my-2 mb-3 mt-3 col-md-12 mx-auto\" />\r\n                    <div className=\"d-flex justify-content-center \">\r\n                        {(isAdmin || isRoot) && <ButtonWithClickEvent buttonClass={\"btn App-button-primary btn-lg m-3\"} url={`/home/users/delete/`} text={\"Delete\"} onClick={this.onSubmitHandlerDelete} />}\r\n                        {(isAdmin || isRoot) && <NavLink className=\"btn App-button-primary btn-lg m-3\" to={`/home/profile/${this.props.id}`} role=\"button\">Cancel</NavLink>}\r\n                        {(isAdmin || isRoot) && <Button buttonClass={\"btn App-button-primary btn-lg m-3\"} url={`/home/users/all/${userService.getUserId()}`} text={\"All Users\"} />} \r\n                    </div >\r\n                </div >\r\n\r\n                <hr className=\"my-2 mb-3 mt-3 col-md-8 mx-auto\" />\r\n            </div >\r\n        )\r\n    }\r\n}"],"sourceRoot":""}